{"ast":null,"code":"import React,{Component,useEffect,useState}from\"react\";import{useContext}from\"react\";import ScoreContext from\"../contexts/scoreContext\";import GameContext from\"../contexts/gameContext\";import\"../css/highscores.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ScoreDisplay(){const{setScoreInfo,scoreInfo}=useContext(ScoreContext);const{gameInfo}=useContext(GameContext);const[isScoreVisible,setIsScoreVisible]=React.useState(false);useEffect(()=>{const storedScoreInfo=JSON.parse(localStorage.getItem(\"scoreInfo\"));if(gameInfo&&gameInfo.eingeloggt){setIsScoreVisible(true);if(!scoreInfo){if(storedScoreInfo){setScoreInfo(storedScoreInfo);}else{setScoreInfo([{Index:0,distance:gameInfo.distance,score:gameInfo.score,name:gameInfo.name}]);}}else{const newScoreInfo={Index:scoreInfo.length,distance:gameInfo.distance,score:gameInfo.score,name:gameInfo.name};setScoreInfo([...scoreInfo,newScoreInfo]);localStorage.setItem(\"scoreInfo\",JSON.stringify([...scoreInfo,newScoreInfo]));}}},[gameInfo]);// Run effect when gameInfo changes\nconst closeScoreInfo=()=>{setIsScoreVisible(false);};return isScoreVisible?/*#__PURE__*/_jsxs(\"div\",{id:\"scoreWindow\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:closeScoreInfo,style:{position:\"absolute\",top:\"0px\",right:\"10px\",background:\"none\",border:\"none\",color:\"white\",fontSize:\"24px\"},children:\"X\"}),/*#__PURE__*/_jsx(\"h1\",{style:{color:\"black\"},children:\"Highscores\"}),/*#__PURE__*/_jsx(\"div\",{id:\"scoreContainer\",children:scoreInfo?[...scoreInfo].sort((a,b)=>b.score-a.score).map((score,i,arr)=>{const maxIndex=Math.max(...arr.map(score=>score.Index));return/*#__PURE__*/_jsx(\"p\",{id:\"score\",style:{color:score.Index===maxIndex?\"red\":\"white\"},children:/*#__PURE__*/_jsxs(\"div\",{id:\"scoreEntry\",children:[i+1,\". \",!score.name?\"Anonym\":score.name,\": \",score.score]})},i);}):/*#__PURE__*/_jsx(\"p\",{children:\"Score Pending...\"})})]}):null;}export default ScoreDisplay;","map":{"version":3,"names":["React","Component","useEffect","useState","useContext","ScoreContext","GameContext","jsx","_jsx","jsxs","_jsxs","ScoreDisplay","setScoreInfo","scoreInfo","gameInfo","isScoreVisible","setIsScoreVisible","storedScoreInfo","JSON","parse","localStorage","getItem","eingeloggt","Index","distance","score","name","newScoreInfo","length","setItem","stringify","closeScoreInfo","id","children","onClick","style","position","top","right","background","border","color","fontSize","sort","a","b","map","i","arr","maxIndex","Math","max"],"sources":["C:/_Code/WEB2/Abgabe Final Huge/kÃ¶lnguessr/cologneguessr/src/components/ScoreDisplay.js"],"sourcesContent":["import React, { Component, useEffect, useState } from \"react\";\r\nimport { useContext } from \"react\";\r\n\r\nimport ScoreContext from \"../contexts/scoreContext\";\r\nimport GameContext from \"../contexts/gameContext\";\r\nimport \"../css/highscores.css\";\r\n\r\nfunction ScoreDisplay() {\r\n  const { setScoreInfo, scoreInfo } = useContext(ScoreContext);\r\n  const { gameInfo } = useContext(GameContext);\r\n\r\n  const [isScoreVisible, setIsScoreVisible] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    const storedScoreInfo = JSON.parse(localStorage.getItem(\"scoreInfo\"));\r\n\r\n    if (gameInfo && gameInfo.eingeloggt) {\r\n      setIsScoreVisible(true);\r\n      if (!scoreInfo) {\r\n        if (storedScoreInfo) {\r\n          setScoreInfo(storedScoreInfo);\r\n        } else {\r\n          setScoreInfo([\r\n            {\r\n              Index: 0,\r\n              distance: gameInfo.distance,\r\n              score: gameInfo.score,\r\n              name: gameInfo.name,\r\n            },\r\n          ]);\r\n        }\r\n      } else {\r\n        const newScoreInfo = {\r\n          Index: scoreInfo.length,\r\n          distance: gameInfo.distance,\r\n          score: gameInfo.score,\r\n          name: gameInfo.name,\r\n        };\r\n        setScoreInfo([...scoreInfo, newScoreInfo]);\r\n        localStorage.setItem(\r\n          \"scoreInfo\",\r\n          JSON.stringify([...scoreInfo, newScoreInfo])\r\n        );\r\n      }\r\n    }\r\n  }, [gameInfo]); // Run effect when gameInfo changes\r\n\r\n  const closeScoreInfo = () => {\r\n    setIsScoreVisible(false);\r\n  };\r\n\r\n  return isScoreVisible ? (\r\n    <div id=\"scoreWindow\">\r\n      <button\r\n        onClick={closeScoreInfo}\r\n        style={{\r\n          position: \"absolute\",\r\n          top: \"0px\",\r\n          right: \"10px\",\r\n          background: \"none\",\r\n          border: \"none\",\r\n          color: \"white\",\r\n          fontSize: \"24px\",\r\n        }}\r\n      >\r\n        X\r\n      </button>\r\n\r\n      <h1 style={{color:\"black\"}}>Highscores</h1>\r\n      <div id=\"scoreContainer\">\r\n        {scoreInfo ? (\r\n          [...scoreInfo]\r\n            .sort((a, b) => b.score - a.score)\r\n            .map((score, i, arr) => {\r\n              const maxIndex = Math.max(...arr.map((score) => score.Index));\r\n              return (\r\n                <p\r\n                  key={i}\r\n                  id=\"score\"\r\n                  style={{ color: score.Index === maxIndex ? \"red\" : \"white\" }}\r\n                >\r\n                  <div id=\"scoreEntry\">\r\n                   {i+1}. {!score.name ? \"Anonym\" : score.name}: {score.score}\r\n                  </div>\r\n                </p>\r\n              );\r\n            })\r\n        ) : (\r\n          <p>Score Pending...</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nexport default ScoreDisplay;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}